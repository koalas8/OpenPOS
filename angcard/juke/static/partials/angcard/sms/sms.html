<div>
    <!-- BEGIN PAGE HEADER-->
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <h3 class="page-title">
                短信模板
                <small>Short Message Templates</small>
                <div class="pull-right">
                    <button class="btn btn-primary" ng-show="root.menu.show('')" ng-click="setAction('add')">添加</button>
                    <button class="btn btn-primary" ng-show="root.menu.show('')" ng-click="showList(query.page)">列表</button>
                </div>
            </h3>
            <!-- END PAGE TITLE & BREADCRUMB-->
        </div>
    </div>
    <!-- END PAGE HEADER-->

    <div class="portlet box blue" ng-show="(menu.action=='add') || (menu.action=='update')">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-reorder"></i>
                添加模板
            </div>
        </div>
        <div class="portlet-body form">
            <!-- BEGIN FORM-->
            <form class="form-horizontal" ng-submit="submit()">
                <div class="form-body">
                    <div class="form-group">
                        <label class="col-md-3 control-label">模板名称</label>
                        <div class="col-md-4">
                            <input type="hidden" ng-model="template.id">
                            <input type="text" ng-model="template.name" class="form-control" placeholder="输入模板名称">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">模板内容</label>
                        <div class="col-md-4">
                            <textarea type="text" ng-model="template.content" class="form-control" placeholder="输入模板内容"></textarea>
                        </div>
                    </div> 
                    <div class="form-group">
                        <label class="col-md-3 control-label">通配符</label>
                        <div class="col-md-2">
                            <select ng-model='vars' class="form-control">
                                <option value="">--选择通配符--</option>
                                <option value="#HuiYuanKaHao#">会员卡号</option>
                                <option value="#KaWeiHao#">卡片尾号</option>
                                <option value="#JiaoYiRiQi#">当前日期</option>
                                <option value="#JiaoYiShiJian#">当前时间</option>
                                <option value="#XingMing#">会员姓名</option> 
                                <option value="#ZengSongJinE#">充值赠送金额</option>
                                <option value="#YuE#">充值后卡内余额</option>
                               <!--  <option value="#TempMoney#">变动金额</option>
                                <option value="#TempPoint#">变动积分</option>
                                <option value="#TempCount#">变动次数</option> -->
                                <option value="#ShengYuJiCi#">账户剩余次数</option>
                                <option value="#JiFen#">账户积分</option>
                                <option value="#ShouJiHaoMa#">手机号码</option>
                                <option value="#ChengWei#">称谓</option>
                                <option value="#DengJi#">等级</option>
                                <option value="#JiaoYiFenDian">交易分店</option>
                                <option value="#FenDianMingCheng#">所属分店</option>
                                <option value="#LeiJiJiFen#">累计积分</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <span class="btn blue" ng-click="addToTemplateContent(vars)">插入到模板内容</span>
                        </div>
                    </div>                  
                </div>
                <div class="form-actions fluid">
                    <div class="col-md-offset-3 col-md-9">
                        <button type="submit" class="btn blue">确定</button>
                        <button type="button" class="btn default" ng-click="setAction('list')">取消</button>
                    </div>
                </div>
            </form>
            <!-- END FORM-->
        </div>
    </div>

    <div class="row" ng-show="menu.action=='list'">
        <div class="col-md-12">
            <table class="table table-striped table-bordered" style="word-break:break-all; word-wrap:break-word;">
                <thead>
                <tr>
                    <th width="50">序号</th>
                    <th width="120">模板名称</th>
                    <th>模板内容</th>
                    <th width="50" ng-show="root.menu.show('')"></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="t in templateStore.data">
                    <td>{{(templateStore.page - 1) * templateStore.limit + $index + 1}}</td>
                    <td>{{t.name}}</td>
                    <td>{{t.content}}</td>
                    <td ng-show="root.menu.show('')">
                        <span ng-click="update($index)">修改</span>
                    </td>
                </tr>
                </tbody>
            </table>
            <paginator></paginator>
        </div>
    </div>
</div>
